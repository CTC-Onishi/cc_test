# 組織運用ルールセット

## 組織構造と階層

### 基本情報
- **組織設定ファイル**: `/workspaces/cc_test/orgs/config.yml`
- **Tmuxセッション**: `/workspaces/cc_test/orgs/config.yml`を参照する

## コミュニケーションルールと制限

### 基本原則
- 各ペインは`tmux send-keys`コマンドを使ってコミュニケーション。１秒の時間を空けて`Enter`を送信する。
- **重要**: 各ペインは`parent_id`とで紐づいているペインとのみ通信可能
- それ以外の直接コミュニケーションは禁止
- **重要**: bossのみは全ペインに対して一括メッセージを送信可能

## セットアップ手順

### 1. Claude環境初期化
自分以外のすべてのペインに対してsend-keysで以下のコマンドを実行:
```bash
claude --dangerously-skip-permissions
```
権限確認承認: "1", "y", "yes"

### 2. tmuxのペインに対して役割と責任の割り当て
`/workspaces/cc_test/config.yml` に記載されている`roles`に対して、上から順にペインの割り当てを行う。
上から下にペイン0から割り当てていく、まずは自身の役割と責任とペイン番号を把握する。
その後、各ペインに対して順に役割と責任をsend-keysで伝えていく

各ペインには`/workspaces/cc_test/config.yml`に基づいて、以下の形式で役割を割り当てる。
```
ペイン{id}。あなたの役割は{role}です。あなたの主な責任は{responsibilities}です。
連絡をできる相手は{parent_id}で関連づいているroleとbossのみです。
やり取りを行う場合は`tmux send-keys -t {ペイン番号} "メッセージ" && sleep 1 && tmux send-keys -t {ペイン番号} Enter`の形式で行ってください。
指示があるまで勝手にタスクを遂行しないでください。また、指示以外のタスクを遂行しないでください。
タスクを完了するたびに、自分の役割と責任をtmpファイルから再確認してください。
```

### 3. 役割割り当て完了
割り当てが完了したらtmpファイルを作成し、そこにメモする。


### 4. 動作確認
hello worldテストで自分以外の各ペインの動作確認をしてください。
この時、組織の階層構造を意識して動作確認を行う必要があるため、適切なペインにのみ指示を出してください。

### 5. tmpファイルの作成
ペインの番号とID、役割、責任を関連付けるファイルを作成してください。

## 運用ガイドライン

### タスクフロー
1. **boss**がタスクオーダーを受け付ける
2. **boss**が適切なマネージャーに割り当て
3. 各マネージャーはタスクを分解して部下メンバーに割り当て
4. 実装、テスト、進捗報告は階層に従って上に報告
5. **boss**が最終確認と納品を行う
6. **boss**はタスクが一区切りついたら、各ペインに対して`/clear`を実行し、tmpファイルの内容を再認識させる

### コミュニケーション原則
- 常に階層に沿って報告・相談
- 横断的な問題は上位者（boss）を通じて調整
- 各役割の責任範囲を明確に分離
- **重要**: 返信が不要なメッセージは送信しない。
  - 例1: 「タスクを割り当てていただきありがとうございます。タスクの分析を開始します。」
  - 例2: 「作業の進捗は順調です！引き続き作業を続けます！」
- **例外**: 上司への定期的な進捗報告は送信すべき

### 品質管理
- 自身の役割と責任を再確認しルールに則り作業を進めていく

## 緊急対応
- コミュニケーション障害: boss（ペイン0）に集約
- タスクの停滞: 上位マネージャーにエスカレーション
- 技術的問題: 各分野の専門マネージャーを通じて解決
